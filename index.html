<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modulation Scheme Visualizer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #0a0a0f; }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
    
    @keyframes glow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
    }
    
    .scheme-btn {
      background: linear-gradient(180deg, #1a1a24 0%, #0f0f16 100%);
      border: 1px solid #2a2a3a;
      color: #888;
      padding: 12px 20px;
      font-family: 'Orbitron', monospace;
      font-size: 11px;
      font-weight: 500;
      letter-spacing: 2px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .scheme-btn:hover {
      border-color: #444;
      color: #ccc;
      transform: translateY(-2px);
    }
    
    .scheme-btn.active {
      border-color: var(--scheme-color);
      color: var(--scheme-color);
      box-shadow: 0 0 20px var(--scheme-glow), inset 0 0 20px var(--scheme-glow);
    }
    
    .scheme-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }
    
    .scheme-btn:hover::before {
      left: 100%;
    }
    
    .grid-line {
      stroke: #1e1e2e;
      stroke-width: 0.5;
    }
    
    .axis-line {
      stroke: #3a3a4a;
      stroke-width: 1;
    }
    
    .point-glow {
      animation: glow 2s ease-in-out infinite;
    }

    @media (max-width: 900px) {
      .main-grid {
        grid-template-columns: 1fr !important;
      }
      .freq-grid {
        grid-template-columns: 1fr !important;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    const ModulationVisualizer = () => {
      const [activeScheme, setActiveScheme] = useState('BPSK');
      const [animatedPoints, setAnimatedPoints] = useState([]);
      const [signalData, setSignalData] = useState([]);
      const [bitSequence, setBitSequence] = useState('10110010');
      const [time, setTime] = useState(0);

      const schemes = {
        BPSK: {
          name: 'Binary Phase Shift Keying',
          description: '1 bit per symbol • 2 phase states',
          points: [
            { x: -1, y: 0, label: '0', bits: '0' },
            { x: 1, y: 0, label: '1', bits: '1' },
          ],
          color: '#00ff88',
          glow: '#00ff8844',
          bandwidth: 2,
          spectralEfficiency: 1,
        },
        QPSK: {
          name: 'Quadrature Phase Shift Keying',
          description: '2 bits per symbol • 4 phase states',
          points: [
            { x: 0.707, y: 0.707, label: '00', bits: '00' },
            { x: -0.707, y: 0.707, label: '01', bits: '01' },
            { x: -0.707, y: -0.707, label: '11', bits: '11' },
            { x: 0.707, y: -0.707, label: '10', bits: '10' },
          ],
          color: '#ff6b35',
          glow: '#ff6b3544',
          bandwidth: 1,
          spectralEfficiency: 2,
        },
        '16QAM': {
          name: '16 Quadrature Amplitude Modulation',
          description: '4 bits per symbol • 16 amplitude/phase states',
          points: [
            { x: -3, y: 3, bits: '0000' }, { x: -1, y: 3, bits: '0001' }, { x: 1, y: 3, bits: '0011' }, { x: 3, y: 3, bits: '0010' },
            { x: -3, y: 1, bits: '0100' }, { x: -1, y: 1, bits: '0101' }, { x: 1, y: 1, bits: '0111' }, { x: 3, y: 1, bits: '0110' },
            { x: -3, y: -1, bits: '1100' }, { x: -1, y: -1, bits: '1101' }, { x: 1, y: -1, bits: '1111' }, { x: 3, y: -1, bits: '1110' },
            { x: -3, y: -3, bits: '1000' }, { x: -1, y: -3, bits: '1001' }, { x: 1, y: -3, bits: '1011' }, { x: 3, y: -3, bits: '1010' },
          ].map(p => ({ ...p, x: p.x / 3, y: p.y / 3, label: p.bits })),
          color: '#a855f7',
          glow: '#a855f744',
          bandwidth: 1,
          spectralEfficiency: 4,
        },
        FSK: {
          name: 'Frequency Shift Keying',
          description: '1 bit per symbol • 2 frequency states',
          points: [
            { x: -0.7, y: 0, label: 'f₁', bits: '0', freq: 1 },
            { x: 0.7, y: 0, label: 'f₂', bits: '1', freq: 2 },
          ],
          color: '#06b6d4',
          glow: '#06b6d444',
          isFSK: true,
          bandwidth: 3,
          spectralEfficiency: 0.5,
        },
      };

      // Generate frequency domain data
      const frequencyData = useMemo(() => {
        const scheme = schemes[activeScheme];
        const points = [];
        const numPoints = 256;
        
        for (let i = 0; i < numPoints; i++) {
          const f = (i - numPoints / 2) / (numPoints / 8);
          let magnitude = 0;
          
          if (activeScheme === 'FSK') {
            const f1 = -0.8;
            const f2 = 0.8;
            const sinc1 = Math.abs(f - f1) < 0.01 ? 1 : Math.sin(Math.PI * (f - f1) * 2) / (Math.PI * (f - f1) * 2);
            const sinc2 = Math.abs(f - f2) < 0.01 ? 1 : Math.sin(Math.PI * (f - f2) * 2) / (Math.PI * (f - f2) * 2);
            magnitude = 0.5 * (sinc1 * sinc1 + sinc2 * sinc2);
          } else if (activeScheme === 'BPSK') {
            const sincVal = Math.abs(f) < 0.01 ? 1 : Math.sin(Math.PI * f * 1.5) / (Math.PI * f * 1.5);
            magnitude = sincVal * sincVal;
          } else if (activeScheme === 'QPSK') {
            const sincVal = Math.abs(f) < 0.01 ? 1 : Math.sin(Math.PI * f * 2) / (Math.PI * f * 2);
            magnitude = sincVal * sincVal;
          } else if (activeScheme === '16QAM') {
            const sincVal = Math.abs(f) < 0.01 ? 1 : Math.sin(Math.PI * f * 2) / (Math.PI * f * 2);
            magnitude = sincVal * sincVal;
            magnitude += 0.02 * Math.exp(-Math.abs(f) * 0.5);
          }
          
          points.push({ 
            f: f, 
            magnitude: Math.max(0, magnitude),
            db: 10 * Math.log10(Math.max(0.001, magnitude))
          });
        }
        return points;
      }, [activeScheme]);

      // Generate spectrogram-style data
      const spectrogramData = useMemo(() => {
        const rows = 32;
        const cols = 64;
        const data = [];
        
        for (let row = 0; row < rows; row++) {
          const rowData = [];
          for (let col = 0; col < cols; col++) {
            const f = (col - cols / 2) / (cols / 4);
            const t = row / rows;
            
            let intensity = 0;
            const bitIdx = Math.floor(t * 8) % 8;
            const bit = bitSequence[bitIdx] || '0';
            
            if (activeScheme === 'FSK') {
              const targetF = bit === '1' ? 0.8 : -0.8;
              intensity = Math.exp(-Math.pow(f - targetF, 2) * 8);
            } else {
              const sincVal = Math.abs(f) < 0.01 ? 1 : Math.sin(Math.PI * f * 2) / (Math.PI * f * 2);
              intensity = sincVal * sincVal;
              intensity *= (0.7 + 0.3 * Math.sin(t * Math.PI * 8 + parseInt(bit) * Math.PI));
            }
            
            rowData.push(Math.min(1, Math.max(0, intensity)));
          }
          data.push(rowData);
        }
        return data;
      }, [activeScheme, bitSequence]);

      useEffect(() => {
        const interval = setInterval(() => {
          setTime(t => t + 0.05);
        }, 50);
        return () => clearInterval(interval);
      }, []);

      useEffect(() => {
        const scheme = schemes[activeScheme];
        const animated = scheme.points.map((point, i) => ({
          ...point,
          scale: 1 + Math.sin(time * 2 + i * 0.5) * 0.1,
        }));
        setAnimatedPoints(animated);
      }, [time, activeScheme]);

      useEffect(() => {
        const points = [];
        for (let i = 0; i < 200; i++) {
          const x = i / 200;
          const bitIndex = Math.floor(x * 8) % 8;
          const bit = bitSequence[bitIndex] || '0';
          
          if (activeScheme === 'FSK') {
            const freq = bit === '1' ? 8 : 4;
            points.push({ x, y: Math.sin(x * Math.PI * 2 * freq + time * 3) });
          } else if (activeScheme === 'BPSK') {
            const phase = bit === '1' ? 0 : Math.PI;
            points.push({ x, y: Math.sin(x * Math.PI * 2 * 6 + phase + time * 2) });
          } else if (activeScheme === 'QPSK') {
            const dibits = bitSequence.slice(bitIndex, bitIndex + 2).padEnd(2, '0');
            const phases = { '00': 0.785, '01': 2.356, '11': 3.927, '10': 5.498 };
            const phase = phases[dibits] || 0;
            points.push({ x, y: Math.sin(x * Math.PI * 2 * 6 + phase + time * 2) });
          } else {
            const phase = (parseInt(bit, 2) / 16) * Math.PI * 2;
            const amp = 0.5 + (parseInt(bit, 2) % 4) * 0.15;
            points.push({ x, y: amp * Math.sin(x * Math.PI * 2 * 6 + phase + time * 2) });
          }
        }
        setSignalData(points);
      }, [time, bitSequence, activeScheme]);

      const scheme = schemes[activeScheme];
      const gridScale = activeScheme === '16QAM' ? 1.2 : 1.5;

      // Color interpolation for spectrogram
      const getSpectrogramColor = (intensity, schemeColor) => {
        const r = parseInt(schemeColor.slice(1, 3), 16);
        const g = parseInt(schemeColor.slice(3, 5), 16);
        const b = parseInt(schemeColor.slice(5, 7), 16);
        const factor = Math.pow(intensity, 0.7);
        return `rgb(${Math.floor(r * factor)}, ${Math.floor(g * factor)}, ${Math.floor(b * factor)})`;
      };

      return (
        <div style={{
          minHeight: '100vh',
          background: 'linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0d0d14 100%)',
          fontFamily: '"JetBrains Mono", "SF Mono", "Fira Code", monospace',
          color: '#e0e0e0',
          padding: '24px',
          boxSizing: 'border-box',
        }}>
          {/* Scanline effect */}
          <div style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            pointerEvents: 'none',
            background: 'repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px)',
            zIndex: 1000,
          }} />
          
          {/* Header */}
          <header style={{
            textAlign: 'center',
            marginBottom: '32px',
            position: 'relative',
          }}>
            <h1 style={{
              fontFamily: '"Orbitron", sans-serif',
              fontSize: '28px',
              fontWeight: 700,
              letterSpacing: '8px',
              background: `linear-gradient(90deg, ${scheme.color}, #fff, ${scheme.color})`,
              WebkitBackgroundClip: 'text',
              WebkitTextFillColor: 'transparent',
              marginBottom: '8px',
              textTransform: 'uppercase',
            }}>
              Modulation Analyzer
            </h1>
            <p style={{
              fontSize: '11px',
              letterSpacing: '4px',
              color: '#666',
              textTransform: 'uppercase',
            }}>
              Digital Signal Constellation & Spectrum Visualizer
            </p>
          </header>

          {/* Scheme Selector */}
          <div style={{
            display: 'flex',
            justifyContent: 'center',
            gap: '12px',
            marginBottom: '32px',
            flexWrap: 'wrap',
          }}>
            {Object.keys(schemes).map(key => (
              <button
                key={key}
                className={`scheme-btn ${activeScheme === key ? 'active' : ''}`}
                style={{
                  '--scheme-color': schemes[key].color,
                  '--scheme-glow': schemes[key].glow,
                }}
                onClick={() => setActiveScheme(key)}
              >
                {key}
              </button>
            ))}
          </div>

          {/* Main Display */}
          <div className="main-grid" style={{
            display: 'grid',
            gridTemplateColumns: '1fr 1fr',
            gap: '24px',
            maxWidth: '1400px',
            margin: '0 auto',
          }}>
            {/* Constellation Diagram */}
            <div style={{
              background: 'linear-gradient(180deg, #0d0d14 0%, #080810 100%)',
              border: '1px solid #1a1a2a',
              borderRadius: '4px',
              padding: '24px',
              position: 'relative',
            }}>
              <div style={{
                position: 'absolute',
                top: '12px',
                left: '16px',
                fontSize: '10px',
                letterSpacing: '2px',
                color: '#444',
                textTransform: 'uppercase',
              }}>
                Constellation Diagram
              </div>
              
              <svg viewBox="-1.5 -1.5 3 3" style={{
                width: '100%',
                aspectRatio: '1',
                display: 'block',
              }}>
                {/* Grid */}
                {[-1, -0.5, 0, 0.5, 1].map(v => (
                  <React.Fragment key={v}>
                    <line className="grid-line" x1={-gridScale} y1={v} x2={gridScale} y2={v} />
                    <line className="grid-line" x1={v} y1={-gridScale} x2={v} y2={gridScale} />
                  </React.Fragment>
                ))}
                
                {/* Axes */}
                <line className="axis-line" x1={-gridScale} y1="0" x2={gridScale} y2="0" />
                <line className="axis-line" x1="0" y1={-gridScale} x2="0" y2={gridScale} />
                
                {/* Axis Labels */}
                <text x="1.3" y="0.08" fill="#555" fontSize="0.12" fontFamily="Orbitron">I</text>
                <text x="0.04" y="-1.25" fill="#555" fontSize="0.12" fontFamily="Orbitron">Q</text>
                
                {/* Decision regions for QAM */}
                {activeScheme === '16QAM' && (
                  <g opacity="0.15">
                    {[-0.67, 0, 0.67].map(x => (
                      <line key={`v${x}`} x1={x} y1="-1" x2={x} y2="1" stroke={scheme.color} strokeWidth="0.01" strokeDasharray="0.02 0.02" />
                    ))}
                    {[-0.67, 0, 0.67].map(y => (
                      <line key={`h${y}`} x1="-1" y1={y} x2="1" y2={y} stroke={scheme.color} strokeWidth="0.01" strokeDasharray="0.02 0.02" />
                    ))}
                  </g>
                )}
                
                {/* Unit circle for PSK */}
                {(activeScheme === 'BPSK' || activeScheme === 'QPSK') && (
                  <circle cx="0" cy="0" r="0.707" fill="none" stroke={scheme.color} strokeWidth="0.01" opacity="0.3" strokeDasharray="0.04 0.02" />
                )}
                
                {/* Constellation Points */}
                {animatedPoints.map((point, i) => (
                  <g key={i} className="point-glow">
                    {/* Glow effect */}
                    <circle
                      cx={point.x}
                      cy={-point.y}
                      r={0.12 * point.scale}
                      fill={scheme.glow}
                    />
                    {/* Main point */}
                    <circle
                      cx={point.x}
                      cy={-point.y}
                      r={0.06 * point.scale}
                      fill={scheme.color}
                      stroke="#fff"
                      strokeWidth="0.01"
                    />
                    {/* Label */}
                    <text
                      x={point.x}
                      y={-point.y + 0.18}
                      fill={scheme.color}
                      fontSize="0.08"
                      textAnchor="middle"
                      fontFamily="JetBrains Mono"
                      fontWeight="500"
                    >
                      {point.label || point.bits}
                    </text>
                  </g>
                ))}
              </svg>
            </div>

            {/* Info Panel */}
            <div style={{
              display: 'flex',
              flexDirection: 'column',
              gap: '16px',
            }}>
              {/* Scheme Info */}
              <div style={{
                background: 'linear-gradient(180deg, #0d0d14 0%, #080810 100%)',
                border: '1px solid #1a1a2a',
                borderRadius: '4px',
                padding: '24px',
              }}>
                <h2 style={{
                  fontFamily: '"Orbitron", sans-serif',
                  fontSize: '16px',
                  color: scheme.color,
                  marginBottom: '8px',
                  letterSpacing: '2px',
                }}>
                  {scheme.name}
                </h2>
                <p style={{
                  fontSize: '13px',
                  color: '#888',
                  marginBottom: '16px',
                }}>
                  {scheme.description}
                </p>
                
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: 'repeat(2, 1fr)',
                  gap: '12px',
                }}>
                  <div style={{
                    background: '#0a0a10',
                    padding: '12px',
                    borderRadius: '2px',
                    border: '1px solid #1a1a2a',
                  }}>
                    <div style={{ fontSize: '10px', color: '#555', marginBottom: '4px', letterSpacing: '1px' }}>SYMBOLS</div>
                    <div style={{ fontSize: '20px', color: scheme.color, fontFamily: 'Orbitron' }}>{scheme.points.length}</div>
                  </div>
                  <div style={{
                    background: '#0a0a10',
                    padding: '12px',
                    borderRadius: '2px',
                    border: '1px solid #1a1a2a',
                  }}>
                    <div style={{ fontSize: '10px', color: '#555', marginBottom: '4px', letterSpacing: '1px' }}>BITS/SYMBOL</div>
                    <div style={{ fontSize: '20px', color: scheme.color, fontFamily: 'Orbitron' }}>{Math.log2(scheme.points.length)}</div>
                  </div>
                  <div style={{
                    background: '#0a0a10',
                    padding: '12px',
                    borderRadius: '2px',
                    border: '1px solid #1a1a2a',
                  }}>
                    <div style={{ fontSize: '10px', color: '#555', marginBottom: '4px', letterSpacing: '1px' }}>MODULATION</div>
                    <div style={{ fontSize: '12px', color: scheme.color, fontFamily: 'Orbitron' }}>
                      {scheme.isFSK ? 'FREQ' : activeScheme === '16QAM' ? 'AMP+PHASE' : 'PHASE'}
                    </div>
                  </div>
                  <div style={{
                    background: '#0a0a10',
                    padding: '12px',
                    borderRadius: '2px',
                    border: '1px solid #1a1a2a',
                  }}>
                    <div style={{ fontSize: '10px', color: '#555', marginBottom: '4px', letterSpacing: '1px' }}>EFFICIENCY</div>
                    <div style={{ fontSize: '12px', color: scheme.color, fontFamily: 'Orbitron' }}>
                      {scheme.spectralEfficiency} bps/Hz
                    </div>
                  </div>
                </div>
              </div>

              {/* Time Domain Waveform */}
              <div style={{
                background: 'linear-gradient(180deg, #0d0d14 0%, #080810 100%)',
                border: '1px solid #1a1a2a',
                borderRadius: '4px',
                padding: '24px',
                flex: 1,
              }}>
                <div style={{
                  fontSize: '10px',
                  letterSpacing: '2px',
                  color: '#444',
                  textTransform: 'uppercase',
                  marginBottom: '12px',
                }}>
                  Time Domain Signal
                </div>
                
                <svg viewBox="0 0 200 60" style={{
                  width: '100%',
                  height: '80px',
                  display: 'block',
                }}>
                  {/* Grid */}
                  {[0, 15, 30, 45, 60].map(y => (
                    <line key={y} x1="0" y1={y} x2="200" y2={y} stroke="#1a1a2a" strokeWidth="0.5" />
                  ))}
                  {[0, 25, 50, 75, 100, 125, 150, 175, 200].map(x => (
                    <line key={x} x1={x} y1="0" x2={x} y2="60" stroke="#1a1a2a" strokeWidth="0.5" />
                  ))}
                  
                  {/* Center line */}
                  <line x1="0" y1="30" x2="200" y2="30" stroke="#2a2a3a" strokeWidth="1" />
                  
                  {/* Signal */}
                  <path
                    d={signalData.map((p, i) => 
                      `${i === 0 ? 'M' : 'L'} ${p.x * 200} ${30 - p.y * 25}`
                    ).join(' ')}
                    fill="none"
                    stroke={scheme.color}
                    strokeWidth="1.5"
                  />
                </svg>
                
                {/* Bit Input */}
                <div style={{ marginTop: '12px' }}>
                  <div style={{
                    fontSize: '10px',
                    letterSpacing: '2px',
                    color: '#444',
                    textTransform: 'uppercase',
                    marginBottom: '8px',
                  }}>
                    Input Bit Sequence
                  </div>
                  <input
                    type="text"
                    value={bitSequence}
                    onChange={(e) => setBitSequence(e.target.value.replace(/[^01]/g, '').slice(0, 16))}
                    style={{
                      width: '100%',
                      background: '#0a0a10',
                      border: `1px solid ${scheme.color}33`,
                      borderRadius: '2px',
                      padding: '10px 12px',
                      color: scheme.color,
                      fontFamily: '"JetBrains Mono", monospace',
                      fontSize: '14px',
                      letterSpacing: '4px',
                      outline: 'none',
                      boxSizing: 'border-box',
                    }}
                    placeholder="10110010"
                  />
                </div>
              </div>
            </div>
          </div>

          {/* Frequency Domain Section */}
          <div className="freq-grid" style={{
            display: 'grid',
            gridTemplateColumns: '2fr 1fr',
            gap: '24px',
            maxWidth: '1400px',
            margin: '24px auto 0',
          }}>
            {/* Power Spectral Density */}
            <div style={{
              background: 'linear-gradient(180deg, #0d0d14 0%, #080810 100%)',
              border: '1px solid #1a1a2a',
              borderRadius: '4px',
              padding: '24px',
            }}>
              <div style={{
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'center',
                marginBottom: '16px',
              }}>
                <div style={{
                  fontSize: '10px',
                  letterSpacing: '2px',
                  color: '#444',
                  textTransform: 'uppercase',
                }}>
                  Power Spectral Density (PSD)
                </div>
                <div style={{
                  fontSize: '9px',
                  color: '#555',
                  fontFamily: 'JetBrains Mono',
                }}>
                  Relative Power (dB)
                </div>
              </div>
              
              <svg viewBox="0 0 300 120" style={{
                width: '100%',
                height: '180px',
                display: 'block',
              }}>
                <defs>
                  <linearGradient id={`psdGradient-${activeScheme}`} x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stopColor={scheme.color} stopOpacity="0.8" />
                    <stop offset="100%" stopColor={scheme.color} stopOpacity="0.1" />
                  </linearGradient>
                  <filter id="psdGlow">
                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                    <feMerge>
                      <feMergeNode in="coloredBlur"/>
                      <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                  </filter>
                </defs>
                
                {/* Grid */}
                {[0, 20, 40, 60, 80, 100].map(y => (
                  <React.Fragment key={y}>
                    <line x1="30" y1={y + 10} x2="290" y2={y + 10} stroke="#1a1a2a" strokeWidth="0.5" />
                    <text x="25" y={y + 14} fill="#444" fontSize="7" textAnchor="end" fontFamily="JetBrains Mono">
                      {-Math.round(y / 3.33)}
                    </text>
                  </React.Fragment>
                ))}
                {[30, 80, 130, 160, 210, 260, 290].map((x, i) => (
                  <React.Fragment key={x}>
                    <line x1={x} y1="10" x2={x} y2="110" stroke="#1a1a2a" strokeWidth="0.5" />
                  </React.Fragment>
                ))}
                
                {/* Axis labels */}
                <text x="160" y="118" fill="#555" fontSize="8" textAnchor="middle" fontFamily="Orbitron">
                  Frequency (normalized to symbol rate)
                </text>
                <text x="50" y="118" fill="#444" fontSize="7" fontFamily="JetBrains Mono">-2Rs</text>
                <text x="160" y="118" fill="#444" fontSize="7" fontFamily="JetBrains Mono">0</text>
                <text x="270" y="118" fill="#444" fontSize="7" fontFamily="JetBrains Mono">+2Rs</text>
                
                {/* Zero frequency line */}
                <line x1="160" y1="10" x2="160" y2="110" stroke="#2a2a3a" strokeWidth="1" />
                
                {/* PSD Fill */}
                <path
                  d={`M 30 110 ${frequencyData.map((p, i) => {
                    const x = 30 + (i / frequencyData.length) * 260;
                    const y = 10 + Math.min(100, Math.max(0, (1 - p.magnitude) * 100));
                    return `L ${x} ${y}`;
                  }).join(' ')} L 290 110 Z`}
                  fill={`url(#psdGradient-${activeScheme})`}
                  opacity="0.5"
                />
                
                {/* PSD Line */}
                <path
                  d={frequencyData.map((p, i) => {
                    const x = 30 + (i / frequencyData.length) * 260;
                    const y = 10 + Math.min(100, Math.max(0, (1 - p.magnitude) * 100));
                    return `${i === 0 ? 'M' : 'L'} ${x} ${y}`;
                  }).join(' ')}
                  fill="none"
                  stroke={scheme.color}
                  strokeWidth="2"
                  filter="url(#psdGlow)"
                />
                
                {/* Bandwidth markers for FSK */}
                {activeScheme === 'FSK' && (
                  <>
                    <line x1="95" y1="10" x2="95" y2="110" stroke={scheme.color} strokeWidth="0.5" strokeDasharray="3 3" opacity="0.5" />
                    <line x1="225" y1="10" x2="225" y2="110" stroke={scheme.color} strokeWidth="0.5" strokeDasharray="3 3" opacity="0.5" />
                    <text x="95" y="8" fill={scheme.color} fontSize="6" textAnchor="middle" fontFamily="JetBrains Mono">f₁</text>
                    <text x="225" y="8" fill={scheme.color} fontSize="6" textAnchor="middle" fontFamily="JetBrains Mono">f₂</text>
                  </>
                )}
              </svg>
            </div>

            {/* Spectrogram */}
            <div style={{
              background: 'linear-gradient(180deg, #0d0d14 0%, #080810 100%)',
              border: '1px solid #1a1a2a',
              borderRadius: '4px',
              padding: '24px',
            }}>
              <div style={{
                fontSize: '10px',
                letterSpacing: '2px',
                color: '#444',
                textTransform: 'uppercase',
                marginBottom: '16px',
              }}>
                Spectrogram (Time-Frequency)
              </div>
              
              <svg viewBox="0 0 64 32" style={{
                width: '100%',
                height: '180px',
                display: 'block',
                imageRendering: 'pixelated',
              }}>
                {spectrogramData.map((row, rowIdx) => (
                  row.map((intensity, colIdx) => (
                    <rect
                      key={`${rowIdx}-${colIdx}`}
                      x={colIdx}
                      y={rowIdx}
                      width="1"
                      height="1"
                      fill={getSpectrogramColor(intensity, scheme.color)}
                    />
                  ))
                ))}
              </svg>
              
              <div style={{
                display: 'flex',
                justifyContent: 'space-between',
                marginTop: '8px',
                fontSize: '8px',
                color: '#444',
                fontFamily: 'JetBrains Mono',
              }}>
                <span>-f</span>
                <span>Frequency →</span>
                <span>+f</span>
              </div>
              <div style={{
                textAlign: 'center',
                marginTop: '4px',
                fontSize: '8px',
                color: '#444',
                fontFamily: 'JetBrains Mono',
              }}>
                ↓ Time
              </div>
            </div>
          </div>

          {/* Symbol Table */}
          <div style={{
            maxWidth: '1400px',
            margin: '24px auto 0',
            background: 'linear-gradient(180deg, #0d0d14 0%, #080810 100%)',
            border: '1px solid #1a1a2a',
            borderRadius: '4px',
            padding: '24px',
          }}>
            <div style={{
              fontSize: '10px',
              letterSpacing: '2px',
              color: '#444',
              textTransform: 'uppercase',
              marginBottom: '16px',
            }}>
              Symbol Mapping Table
            </div>
            
            <div style={{
              display: 'grid',
              gridTemplateColumns: `repeat(${Math.min(scheme.points.length, 8)}, 1fr)`,
              gap: '8px',
            }}>
              {scheme.points.map((point, i) => (
                <div key={i} style={{
                  background: '#0a0a10',
                  border: '1px solid #1a1a2a',
                  borderRadius: '2px',
                  padding: '12px 8px',
                  textAlign: 'center',
                }}>
                  <div style={{
                    fontSize: '12px',
                    color: scheme.color,
                    fontWeight: 600,
                    marginBottom: '4px',
                    fontFamily: 'JetBrains Mono',
                  }}>
                    {point.bits}
                  </div>
                  <div style={{
                    fontSize: '9px',
                    color: '#555',
                  }}>
                    I: {point.x.toFixed(2)} Q: {point.y.toFixed(2)}
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Footer */}
          <footer style={{
            textAlign: 'center',
            marginTop: '32px',
            fontSize: '10px',
            color: '#333',
            letterSpacing: '2px',
          }}>
            DIGITAL MODULATION ANALYSIS SYSTEM • {activeScheme} • SPECTRUM ANALYZER
          </footer>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ModulationVisualizer />);
  </script>
</body>
</html>
